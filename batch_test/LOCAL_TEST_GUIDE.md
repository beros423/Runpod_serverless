# λ΅μ»¬ Mock μ„λ²„ ν…μ¤νΈ κ°€μ΄λ“

## π€ λΉ λ¥Έ μ‹μ‘

### 1λ‹¨κ³„: ν•„μ”ν• ν¨ν‚¤μ§€ μ„¤μΉ
```bash
pip install flask aiohttp
```

### 2λ‹¨κ³„: Mock μ„λ²„ μ‹¤ν–‰
```bash
python mock_server.py
```

μ„λ²„κ°€ http://localhost:5000 μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.

### 3λ‹¨κ³„: ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
μƒ ν„°λ―Έλ„μ„ μ—΄κ³ :
```bash
python test_parallel_local.py
```

## π“‚ μƒμ„±λλ” νμΌλ“¤

### results_parallel/ (λ³‘λ ¬ μ²λ¦¬ κ²°κ³Ό)
- `result_00_xxxxx.txt` ~ `result_09_xxxxx.txt`: κ° μ‘μ—…μ κ²°κ³Ό ν…μ¤νΈ
- `summary.json`: μ „μ²΄ μ‘μ—… μ”μ•½

### results_sequential/ (μμ°¨ μ²λ¦¬ κ²°κ³Ό)
- `result_00_xxxxx.txt` ~ `result_09_xxxxx.txt`: κ° μ‘μ—…μ κ²°κ³Ό ν…μ¤νΈ
- `summary.json`: μ „μ²΄ μ‘μ—… μ”μ•½

## π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### κ°„λ‹¨ν• ν…μ¤νΈ (μµμ… 1)
- 5κ° μ‘μ—…μ„ λ™μ‹μ— μ²λ¦¬
- κ° μ‘μ—…μ€ 1-3μ΄ λλ¤ λ€κΈ°
- λ³‘λ ¬ μ²λ¦¬ ν¨κ³Όλ¥Ό λΉ λ¥΄κ² ν™•μΈ

### μ „μ²΄ μ„±λ¥ λΉ„κµ (μµμ… 2)
- 10κ° μ‘μ—…μΌλ΅ μμ°¨ vs λ³‘λ ¬ λΉ„κµ
- μ†λ„ ν–¥μƒ λ°°μ¨ μΈ΅μ •
- λ³‘λ ¬ν™” ν¨μ¨ κ³„μ‚°

## π“ μμƒ κ²°κ³Ό

```
μμ°¨ μ²λ¦¬: 20μ΄ (κ° μ‘μ—…μ„ ν•λ‚μ”© μ²λ¦¬)
λ³‘λ ¬ μ²λ¦¬: 4-6μ΄ (5κ°μ”© λ™μ‹ μ²λ¦¬)
μ†λ„ ν–¥μƒ: 3-5λ°°
```

## π”§ μ»¤μ¤ν„°λ§μ΄μ§•

### μ›μ»¤ μ λ³€κ²½
```python
processor = LocalMockProcessor(num_workers=10)  # 10κ°λ΅ μ¦κ°€
```

### λ€κΈ° μ‹κ°„ μ΅°μ •
```python
test_inputs = [
    {"task": f"μ‘μ—…_{i}", "wait_time": 5.0}  # κ³ μ • 5μ΄
    for i in range(10)
]
```

### μ‘μ—… μ λ³€κ²½
```python
num_jobs = 20  # 20κ° μ‘μ—…μΌλ΅ μ¦κ°€
```

## π API μ—”λ“ν¬μΈνΈ

Mock μ„λ²„λ” λ‹¤μ μ—”λ“ν¬μΈνΈλ¥Ό μ κ³µν•©λ‹λ‹¤:

- `POST /v2/{endpoint}/run` - μ‘μ—… μ μ¶
- `GET /v2/{endpoint}/status/{id}` - μƒνƒ μ΅°ν
- `GET /health` - ν—¬μ¤ μ²΄ν¬
- `GET /jobs` - λ¨λ“  μ‘μ—… λ©λ΅
- `POST /reset` - μ‘μ—… μ΄κΈ°ν™”

## π’΅ μ‹¤μ „ μ μ©

μ΄ λ΅μ»¬ ν…μ¤νΈκ°€ μ μ‘λ™ν•λ©΄, μ‹¤μ  RunPod APIλ΅ μ „ν™ν•  λ•:

1. `base_url`μ„ `https://api.runpod.ai`λ΅ λ³€κ²½
2. API ν‚¤ μ¶”κ°€
3. μ‹¤μ  μ—”λ“ν¬μΈνΈ ID μ‚¬μ©

```python
# λ΅μ»¬ ν…μ¤νΈ
processor = LocalMockProcessor("http://localhost:5000")

# μ‹¤μ  RunPod
processor = RunPodParallelProcessor(
    api_key="your_key",
    endpoint_id="your_endpoint"
)
```

## π― ν•µμ‹¬ κ°λ… ν™•μΈ

μ΄ ν…μ¤νΈλ¥Ό ν†µν•΄ ν™•μΈν•  μ μλ” κ²ƒ:

β… λ³‘λ ¬ μ²λ¦¬μ μ†λ„ ν–¥μƒ  
β… λΉ„λ™κΈ° I/Oμ ν¨μ¨μ„±  
β… μ—¬λ¬ μ›μ»¤μ λ…λ¦½μ  λ™μ‘  
β… μ‘μ—… μ μ¶-λ€κΈ°-μ™„λ£ ν”λ΅μ°  
β… κ²°κ³Ό νμΌ μ €μ¥ λ° κ΄€λ¦¬  

## π› λ¬Έμ  ν•΄κ²°

### "Connection refused" μ—λ¬
β†’ mock_server.pyκ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ

### λλ¦° μ‹¤ν–‰ μ†λ„
β†’ poll_intervalμ„ μ΅°μ •ν•κ±°λ‚ wait_timeμ„ μ¤„μ΄μ„Έμ”

### νμΌ μ €μ¥ μ¤λ¥
β†’ results ν΄λ”μ κ¶ν• ν™•μΈ
